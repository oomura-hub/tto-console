<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTO 統合コンソール｜株式会社SOCIAL GREEN TECH</title>
    <meta name="description" content="TikTok Organic運用の業務マニュアル・構成案ジェネレーター・AIメンターを統合した社内プラットフォーム">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Outfit:wght@600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Header -->
    <header class="app-header">
        <div class="header-left" onclick="navigateTo('dashboard')">TTO 統合コンソール</div>
        <nav class="header-nav">
            <button class="header-tab active" data-page="dashboard" onclick="navigateTo('dashboard')">ダッシュボード</button>
            <button class="header-tab" data-page="manual" onclick="navigateTo('manual')">マニュアル</button>
            <button class="header-tab" data-page="generator" onclick="navigateTo('generator')">ジェネレーター</button>
            <button class="header-tab" data-page="research" onclick="navigateTo('research')">リサーチ</button>
        </nav>

    </header>

    <div class="app-container">
        <!-- Main Content Area -->
        <main class="main-area">
            <!-- ===== Dashboard Page ===== -->
            <div class="page" id="page-dashboard">
                <div class="dashboard-grid">
                    <div class="dash-card dash-hero" onclick="navigateTo('manual')">
                        <div class="dash-icon">📖</div>
                        <h2>業務マニュアル</h2>
                        <p>TTOの基礎からバズの科学、投稿作成まで。全6章を網羅したプロフェッショナルマニュアル。</p>
                        <span class="dash-link">開く →</span>
                    </div>
                    <div class="dash-card" onclick="navigateTo('generator')">
                        <div class="dash-icon">⚡</div>
                        <h2>構成案ジェネレーター</h2>
                        <p>FMTを選ぶだけで8枚構成の投稿案を自動生成。点数診断、二項対立、ランキング形式に対応。</p>
                        <span class="dash-link">開く →</span>
                    </div>
                    <div class="dash-card" onclick="navigateTo('research')">
                        <div class="dash-icon">🔍</div>
                        <h2>競合リサーチ</h2>
                        <p>ハッシュタグ別にバズ投稿を自動収集。再生数・保存率・投稿形式で絞り込み、競合を丸裸にします。</p>
                        <span class="dash-link">開く →</span>
                    </div>
                    <div class="dash-card dash-stats">
                        <div class="dash-icon">📚</div>
                        <h2>参考資料</h2>
                        <div class="quick-links">
                            <a href="https://docs.google.com/presentation/d/1Q2MdRkm-Bz0ZuoRsknspXy9jE2k1pZgMsV0l1cYpbpw/edit?slide=id.g32b0a99252d_0_10#slide=id.g32b0a99252d_0_10"
                                target="_blank">📎 社内スライド <span class="link-desc">— TTOの全体像理解</span></a>
                            <a href="https://docs.google.com/presentation/d/1FnIq56orlS4nrYDsUcQECs62uOYmuWa6tKXePX6qdrc/edit?slide=id.p#slide=id.p"
                                target="_blank">📎 他社スライド <span class="link-desc">— TikTok販促の概要理解</span></a>
                            <a href="https://note.com/preview/nb9748f6bbf7e?prev_access_key=776094c0c1e0a5c573da36b9c46a48b4"
                                target="_blank">📎 他社note <span class="link-desc">— TikTok販促の概要理解</span></a>
                            <a href="https://docs.google.com/spreadsheets/d/17b68JYL6FaWy45uXoeZz4LyrCMQczGqbC2Eth3_oCGQ/edit?gid=1812743507#gid=1812743507"
                                target="_blank">📊 TTOスプレッドシート <span class="link-desc">— ナレッジ蓄積・投稿FB</span></a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ===== Manual Page ===== -->
            <div class="page" id="page-manual" style="display:none;">
                <div class="manual-layout">
                    <aside class="manual-sidebar">
                        <div class="sidebar-search">
                            <input type="text" class="search-input" id="manualSearch" placeholder="マニュアル内検索...">
                        </div>
                        <nav class="manual-nav" id="manualNav">
                            <!-- JS generates navigation from manual-data.js -->
                        </nav>
                    </aside>
                    <div class="manual-content" id="manualContent">
                        <!-- JS renders manual content -->
                    </div>
                </div>
            </div>

            <!-- ===== Structure Generator Page (Merged with Analyzer) ===== -->
            <div class="page" id="page-generator" style="display:none;">
                <div class="generator-wrapper">
                    <h1 class="page-title">構成案ジェネレーター</h1>
                    <p class="page-subtitle">参考動画のURLから「バズの構造」を分析し、3パターンの構成案を作成します</p>

                    <div class="gen-input-card">
                        <div class="input-label">参考動画のURL <span class="badge">推奨</span></div>
                        <input type="text" id="videoUrlUnified" class="gen-input-field"
                            placeholder="TikTok等のバズ投稿URLを入力...">

                        <div class="input-row">
                            <div class="input-col">
                                <div class="input-label">出力形式 (FMT)</div>
                                <select id="fmtSelectorUnified" class="gen-select-field">
                                    <option value="auto">自動（動画構成から最適化）</option>
                                    <option value="score">点数診断系</option>
                                    <option value="binary">二項対立</option>
                                    <option value="ranking">ランキング形式</option>
                                </select>
                            </div>
                            <button class="main-gen-btn" onclick="runGenerator()">
                                <span class="btn-icon">⚡</span> 分析 & 構成生成
                            </button>
                        </div>
                    </div>

                    <div id="unifiedGenStatus" class="analyzer-status" style="display:none;">
                        <div class="spinner"></div>
                        <span id="unifiedStatusText">動画を分析中...</span>
                    </div>

                    <div id="unifiedGenResult" class="gen-result">
                        <!-- Results will be injected here -->
                    </div>
                </div>
            </div>

            <!-- ===== Research Page (TikTok競合リサーチ) ===== -->
            <div class="page" id="page-research" style="display:none;">
                <div class="research-wrapper">
                    <h1 class="page-title">競合リサーチ</h1>
                    <p class="page-subtitle">ハッシュタグからバズ投稿を自動収集・フィルタリング。競合の「勝ちパターン」を発見します。</p>

                    <div class="research-form">
                        <div class="research-row">
                            <div class="research-field research-field-wide">
                                <label class="research-label">ハッシュタグ <span class="badge">必須</span></label>
                                <input type="text" id="researchHashtags" class="gen-input-field"
                                    placeholder="例: KINUI, スキンケア, PR（カンマ区切りで複数可）">
                            </div>
                        </div>
                        <div class="research-row">
                            <div class="research-field">
                                <label class="research-label">最低再生数</label>
                                <select id="researchMinViews" class="gen-select-field">
                                    <option value="10000">1万回以上</option>
                                    <option value="50000">5万回以上</option>
                                    <option value="100000" selected>10万回以上</option>
                                    <option value="500000">50万回以上</option>
                                    <option value="1000000">100万回以上</option>
                                </select>
                            </div>
                            <div class="research-field">
                                <label class="research-label">投稿形式</label>
                                <select id="researchPostType" class="gen-select-field">
                                    <option value="all" selected>すべて</option>
                                    <option value="image">画像投稿のみ</option>
                                    <option value="video">動画投稿のみ</option>
                                </select>
                            </div>
                            <div class="research-field">
                                <label class="research-label">期間</label>
                                <select id="researchPeriod" class="gen-select-field">
                                    <option value="7">1週間以内</option>
                                    <option value="30" selected>1ヶ月以内</option>
                                    <option value="90">3ヶ月以内</option>
                                    <option value="180">6ヶ月以内</option>
                                    <option value="365">1年以内</option>
                                </select>
                            </div>
                            <div class="research-field">
                                <label class="research-label">取得件数</label>
                                <select id="researchMaxResults" class="gen-select-field">
                                    <option value="30">30件</option>
                                    <option value="50" selected>50件</option>
                                    <option value="100">100件</option>
                                </select>
                            </div>
                        </div>
                        <div class="research-row">
                            <button class="main-gen-btn research-btn" onclick="runResearch()">
                                <span class="btn-icon">🔍</span> 競合投稿を検索
                            </button>
                        </div>
                    </div>

                    <div id="researchStatus" class="analyzer-status" style="display:none;">
                        <div class="spinner"></div>
                        <span id="researchStatusText">TikTok投稿を収集中...</span>
                    </div>

                    <div id="researchSummary" class="research-summary" style="display:none;"></div>

                    <div id="researchResults" class="research-results">
                        <!-- Results cards will be injected here -->
                    </div>
                </div>
            </div>
        </main>

        <!-- Right Side Panel (AI Chat / Memo) -->
        <aside class="side-panel">
            <div class="panel-tabs">
                <button class="panel-tab active" id="tabChat" onclick="switchPanel('chat')">
                    <svg viewBox="0 0 24 24" width="15" height="15" fill="currentColor">
                        <path
                            d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z" />
                    </svg>
                    AI Chat
                </button>
                <button class="panel-tab" id="tabMemo" onclick="switchPanel('memo')">
                    <svg viewBox="0 0 24 24" width="15" height="15" fill="currentColor">
                        <path
                            d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z" />
                    </svg>
                    メモ
                </button>
            </div>
            <!-- Chat -->
            <div class="panel-body" id="panelChat">
                <div class="chat-messages" id="chatMessages">
                    <div class="message ai-message">GPT・Claude・Gemini・DeepSeekから選んで質問できます。TTO関連はマニュアルに基づいて回答します。</div>
                </div>
                <div class="chat-input-area">
                    <div class="chat-input-top">
                        <select id="modelSelector" class="model-select">
                            <!-- JS generates options dynamically from AI_MODELS -->
                        </select>
                    </div>
                    <div class="chat-input-bottom">
                        <button class="web-search-toggle" id="webSearchToggle" onclick="toggleWebSearch()"
                            title="Web検索を有効にする">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                            <span class="web-search-label">Web</span>
                        </button>
                        <textarea class="chat-input" id="chatInput" placeholder="質問を入力..." rows="1"></textarea>
                        <button class="send-btn" id="sendBtn">
                            <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor"
                                stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="22" y1="2" x2="11" y2="13"></line>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            <!-- Memo -->
            <div class="panel-body" id="panelMemo" style="display:none;">
                <div class="memo-header">
                    <span class="memo-title">メモ</span>
                    <span class="memo-status" id="memoStatus">保存済み</span>
                </div>
                <textarea class="memo-area" id="memoArea" placeholder="マニュアルを読みながらメモを取れます。入力内容は自動で保存されます。"></textarea>
            </div>
        </aside>
    </div>

    <script src="manual-data.js"></script>
    <script src="generator-data.js"></script>
    <script src="app.js?v=11"></script>
</body>

</html>